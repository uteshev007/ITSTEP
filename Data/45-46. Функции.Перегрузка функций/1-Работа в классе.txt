#include <iostream>
#include <iomanip>
#include <time.h>
using namespace std;
/*
16. **Дан одномерный массив целых чисел.
Напишите не рекурсивную функцию, которая осуществляет
нахождения искомого значения с помощью бинарного поиска.
Функция возвращает позицию вхождения искомого значения.
Проиллюстрируйте работу функции примером.
*/
#define SIZE 6

void InsMas(int mas[], int size, int min, int max)
{
  for (int i = 0; i < size; i++)
  {
    mas[i] = rand() % (max - min + 1) + min;
  }
}

void PrintMas(int mas[], int size)
{
  for (int i = 0; i < size; i++)
  {
    cout << mas[i] << " ";
  }
  cout << endl;
}

void SortMas(int mas[], int size)
{
  for (int i = 0; i < size; i++)
  {
    for (int j = size - 1; j > 0; j--)
    {
      if (mas[j] < mas[j - 1])
      {
        swap(mas[j], mas[j - 1]);
      }
    }
  }
}

int Bsearch(int mas[], int size, int num)
{
  int mid = 0, start = 0, end = size - 1;
  while (true)
  {
    //mid = (end - start) / 2 + start;
    mid = (start + end) / 2;
    if (mas[mid] > num) { end = mid; }
    else  if (mas[mid] < num) { start = mid; }
    else { return mid; }

    if ((end - start) / 2 == 0) { break; }  //return -1
  }
  return -1;
}
int main()
{
  setlocale(LC_ALL, "Rus");
  srand(time(0));

  int mas[SIZE];
  InsMas(mas, SIZE, 10, 30);
  PrintMas(mas, SIZE);
  SortMas(mas, SIZE);
  PrintMas(mas, SIZE);
  cout << endl;

  int size2;
  cout << "Введите размер массива: ";
  cin >> size2;
  int* mas2 = new int[size2];
  InsMas(mas2, size2, 4, 44);
  PrintMas(mas2, size2);
  SortMas(mas2, size2);
  PrintMas(mas2, size2);

  int num;
  cout << "Введите число: ";
  cin >> num;
  cout << endl;
  int rest = Bsearch(mas2, size2, num);
  if (rest != -1)
  {
    cout << "Число найдено. В позиции: " << rest + 1 << endl;
  }
  else
  {
    cout << "Такого числа в массиве нет." << endl;
  }

  cin.get(); cin.get();
}
